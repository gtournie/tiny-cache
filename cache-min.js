var Cache=function(){"use strict";function t(t){this.options=t=t||{},this.expireHash={},this.keys=[],"object"==typeof t.storage?(this.webStorage=!0,this.storage=t.storage,this.keyPrefix=(t.keyPrefix||"cache"+l.length)+":",e.call(this)):(this.storage={},this.keyPrefix=""),this.length=this.keys.length,this.setLimit(t.limit),l.push(this)}function e(){for(var t,e,s,r,n=this.storage,h=this.keyPrefix,o=h.length,l=Number.POSITIVE_INFINITY,f={},u=0,g=0,c=n.length;c>g;++g)r=n.key(g),0===r.indexOf(h)&&(t=n[r],r=r.slice(o),e=t.substring(t.indexOf("_")+1,t.indexOf(":")),i.call(this,r,parseInt(e,10))&&(s=parseInt(t,10),f[s]=r,++u,l>s&&(l=s)));f.length=u?u+l:0,this.index=f.length-1,this.keys=a.call(f,l)}function i(t,e){if(isNaN(e))return!0;var i=new Date;if(i>=e)return!1;var s=this.expireHash,r=this;return e in s?s[e].push(t):(s[e]=[t],setTimeout(function(){n.apply(r,s[e]),delete s[e]},Math.max(0,e-i))),!0}function s(t,e){if(t){if(t.maxAge)return+new Date((new Date).getTime()+t.maxAge);if(t.expires)return+t.expires}return e?s(e):void 0}function r(){var t=this.length-this.limit;t>0&&(h.call(this,this.keys.splice(0,t)),this.length=this.keys.length)}function n(){for(var t,e,i=this.keys,s=this.keyPrefix,r=this.storage,n=0,h=arguments.length;h>n;++n)e=arguments[n],t=o(i,""+e),t>=0&&(i.splice(t,1),delete r[s+e]);this.length=i.length}function h(t){for(var e=this.storage,i=this.keyPrefix,s=0,r=t.length;r>s;++s)delete e[i+t[s]]}var a=[].slice,o="function"==typeof[].indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var i=0,s=t.length;s>i;++i)if(t[i]===e)return i;return-1},l=[],f=t.prototype;return f.hasKey=function(t){return o(this.keys,""+t)>=0},f.setItem=function(t,e,n){var h=s(n,this.options),a=this.keys;return t=""+t,this.removeItem(t),i.call(this,t,h)&&(this.webStorage&&(e=++this.index+"_"+h+":"+e),this.storage[this.keyPrefix+t]=e,a.push(t),this.length=a.length,r.call(this)),this},f.getItem=function(t,e){var i;if(arguments.length<2||(i=this.hasKey(t))){var s=this.storage[this.keyPrefix+t];return this.webStorage?s?s.substring(s.indexOf(":")+1):void 0:s}return e},f.removeItem=function(t){t=""+t;var e=this.keys,i=o(e,""+t);if(i>=0){var s,r=this.expireHash;for(var n in r)if(s=r[n],i=o(s,t),i>=0){s.splice(i,1);break}e.splice(i,1),this.length=e.length,delete this.storage[this.keyPrefix+t]}return this},f.setLimit=function(t){return t=parseInt(t,10),t>=0?(this.limit=t,r.call(this)):delete this.limit,this},f.clear=function(){return this.webStorage?h.call(this,this.keys):this.storage={},this.keys=[],this.length=0,this},f.key=function(t){return this.keys[t]},t.clear=function(){for(var t=0,e=l.length;e>t;++t)l[t].clear()},"undefined"!=typeof module&&module.exports&&(module.exports=t),t}();
//# sourceMappingURL=cache-min.map